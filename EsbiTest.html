<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ESBI 확장 6분면 성향 테스트</title>
<link rel="icon" href="https://github.com/user-attachments/assets/3975983b-a76e-4a1a-8cae-ceba6c03b857" type="image/png" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 700px; margin: auto; padding: 20px; background: #f9f9f9; color: #333; }
  h1 { text-align: center; margin-bottom: 30px; color: #2c3e50; }
  .question { margin-bottom: 18px; background: #fff; padding: 15px 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  .question p { margin-bottom: 8px; font-weight: 600; color: #34495e; }
  .answers label { margin-right: 15px; cursor: pointer; display: inline-flex; align-items: center; }
  .answers input[type="radio"] { margin-right: 5px; }
  #result { margin-top: 30px; padding: 20px; background: #e8f5e9; border-radius: 8px; text-align: center; border: 1px solid #c8e6c9; }
  #result h2 { color: #2e7d32; margin-bottom: 15px; }
  #result p { margin-bottom: 8px; font-size: 1.1em; color: #4CAF50; }
  #result .score-detail { font-size: 0.95em; color: #555; line-height: 1.6; text-align: left; background: #f0f0f0; padding: 10px; border-radius: 5px; margin-top: 15px; }
  #result .score-detail span { font-weight: bold; color: #1a237e; }
  button { display: block; margin: 30px auto; padding: 12px 28px; font-size: 1.1em; border: none; background: #4caf50; color: white; border-radius: 6px; cursor: pointer; transition: background 0.3s ease; }
  button:hover { background: #45a049; }
  footer { text-align:center; font-size:0.85em; color:#888; margin-top:40px; padding-top: 20px; border-top: 1px solid #eee; }
  /* 차트 컨테이너 스타일 */
  .chart-container { width: 100%; max-width: 480px; margin: 20px auto; } 
  canvas { background: white; border-radius: 8px; padding: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<h1>ESBI 확장 6분면 성향 테스트</h1>

<form id="quizForm">

<div class="question">
  <p>1. 나는 **안정적인 직업**과 **예측 가능한 수입**이 가장 중요하다고 생각합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q1" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q1" value="4"> 그렇다</label>
    <label><input type="radio" name="q1" value="3"> 보통이다</label>
    <label><input type="radio" name="q1" value="2"> 아니다</label>
    <label><input type="radio" name="q1" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>2. 회사나 조직의 **규칙과 절차**를 따르는 것이 편안합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q2" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q2" value="4"> 그렇다</label>
    <label><input type="radio" name="q2" value="3"> 보통이다</label>
    <label><input type="radio" name="q2" value="2"> 아니다</label>
    <label><input type="radio" name="q2" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>3. **퇴직금, 연금, 의료 보험** 등 복리후생 혜택이 좋은 직장을 선호합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q3" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q3" value="4"> 그렇다</label>
    <label><input type="radio" name="q3" value="3"> 보통이다</label>
    <label><input type="radio" name="q3" value="2"> 아니다</label>
    <label><input type="radio" name="q3" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>4. 내 업무는 명확하게 정의되어 있고, 그에 따라 **정해진 일을 하는 것**을 선호합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q4" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q4" value="4"> 그렇다</label>
    <label><input type="radio" name="q4" value="3"> 보통이다</label>
    <label><input type="radio" name="q4" value="2"> 아니다</label>
    <label><input type="radio" name="q4" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>5. **승진**을 통해 더 높은 직위와 수입을 얻는 것이 목표입니다.</p>
  <div class="answers">
    <label><input type="radio" name="q5" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q5" value="4"> 그렇다</label>
    <label><input type="radio" name="q5" value="3"> 보통이다</label>
    <label><input type="radio" name="q5" value="2"> 아니다</label>
    <label><input type="radio" name="q5" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>

<div class="question">
  <p>6. 나는 **내 자신의 상사**가 되어 모든 결정을 내리는 것을 선호합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q6" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q6" value="4"> 그렇다</label>
    <label><input type="radio" name="q6" value="3"> 보통이다</label>
    <label><input type="radio" name="q6" value="2"> 아니다</label>
    <label><input type="radio" name="q6" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>7. 일을 할 때 **완벽하게 제어**하고 싶은 욕구가 강합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q7" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q7" value="4"> 그렇다</label>
    <label><input type="radio" name="q7" value="3"> 보통이다</label>
    <label><input type="radio" name="q7" value="2"> 아니다</label>
    <label><input type="radio" name="q7" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>8. 내 노력과 재능이 **직접적으로 결과와 수입으로 연결**되는 것을 중요하게 생각합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q8" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q8" value="4"> 그렇다</label>
    <label><input type="radio" name="q8" value="3"> 보통이다</label>
    <label><input type="radio" name="q8" value="2"> 아니다</label>
    <label><input type="radio" name="q8" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>9. 다른 사람에게 내 일을 맡기기보다 **내가 직접 처리하는 것**이 마음 편합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q9" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q9" value="4"> 그렇다</label>
    <label><input type="radio" name="q9" value="3"> 보통이다</label>
    <label><input type="radio" name="q9" value="2"> 아니다</label>
    <label><input type="radio" name="q9" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>10. 특정 분야에서 **최고의 전문가**로 인정받는 것이 중요하다고 생각합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q10" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q10" value="4"> 그렇다</label>
    <label><input type="radio" name="q10" value="3"> 보통이다</label>
    <label><input type="radio" name="q10" value="2"> 아니다</label>
    <label><input type="radio" name="q10" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>

<div class="question">
  <p>11. 나는 **나 없이도 잘 돌아가는 시스템**을 만들고 싶습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q11" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q11" value="4"> 그렇다</label>
    <label><input type="radio" name="q11" value="3"> 보통이다</label>
    <label><input type="radio" name="q11" value="2"> 아니다</label>
    <label><input type="radio" name="q11" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>12. 다른 사람들의 **시간과 재능을 활용**하여 더 큰 성과를 내는 것에 관심이 많습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q12" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q12" value="4"> 그렇다</label>
    <label><input type="radio" name="q12" value="3"> 보통이다</label>
    <label><input type="radio" name="q12" value="2"> 아니다</label>
    <label><input type="radio" name="q12" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>13. 새로운 **사업 아이디어**를 구상하고 그것을 현실로 만드는 것에 흥미를 느낍니다.</p>
  <div class="answers">
    <label><input type="radio" name="q13" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q13" value="4"> 그렇다</label>
    <label><input type="radio" name="q13" value="3"> 보통이다</label>
    <label><input type="radio" name="q13" value="2"> 아니다</label>
    <label><input type="radio" name="q13" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>14. 사업을 **확장하고 성장**시키는 것이 중요하다고 생각합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q14" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q14" value="4"> 그렇다</label>
    <label><input type="radio" name="q14" value="3"> 보통이다</label>
    <label><input type="radio" name="q14" value="2"> 아니다</label>
    <label><input type="radio" name="q14" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>15. **리더십**을 발휘하여 팀을 이끌고 비전을 제시하는 것을 좋아합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q15" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q15" value="4"> 그렇다</label>
    <label><input type="radio" name="q15" value="3"> 보통이다</label>
    <label><input type="radio" name="q15" value="2"> 아니다</label>
    <label><input type="radio" name="q15" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>

<div class="question">
  <p>16. 나는 **돈이 나를 위해 일하게** 만드는 방법을 찾습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q16" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q16" value="4"> 그렇다</label>
    <label><input type="radio" name="q16" value="3"> 보통이다</label>
    <label><input type="radio" name="q16" value="2"> 아니다</label>
    <label><input type="radio" name="q16" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>17. **자산을 구매**하여 거기에서 수동적인 수입이 발생하도록 하는 것에 관심이 많습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q17" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q17" value="4"> 그렇다</label>
    <label><input type="radio" name="q17" value="3"> 보통이다</label>
    <label><input type="radio" name="q17" value="2"> 아니다</label>
    <label><input type="radio" name="q17" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>18. 시장의 **흐름과 투자 기회**를 분석하는 것을 즐깁니다.</p>
  <div class="answers">
    <label><input type="radio" name="q18" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q18" value="4"> 그렇다</label>
    <label><input type="radio" name="q18" value="3"> 보통이다</label>
    <label><input type="radio" name="q18" value="2"> 아니다</label>
    <label><input type="radio" name="q18" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>19. **위험을 관리**하며 수익을 극대화하는 방법을 배우고 싶습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q19" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q19" value="4"> 그렇다</label>
    <label><input type="radio" name="q19" value="3"> 보통이다</label>
    <label><input type="radio" name="q19" value="2"> 아니다</label>
    <label><input type="radio" name="q19" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>20. **재정적 자유와 독립**을 달성하는 궁극적인 목표가 있습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q20" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q20" value="4"> 그렇다</label>
    <label><input type="radio" name="q20" value="3"> 보통이다</label>
    <label><input type="radio" name="q20" value="2"> 아니다</label>
    <label><input type="radio" name="q20" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>

<div class="question">
  <p>21. 실패할 위험이 있더라도 **새로운 아이디어를 시도**하는 것을 두려워하지 않습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q21" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q21" value="4"> 그렇다</label>
    <label><input type="radio" name="q21" value="3"> 보통이다</label>
    <label><input type="radio" name="q21" value="2"> 아니다</label>
    <label><input type="radio" name="q21" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>22. **기존 방식에 얽매이지 않고** 문제를 해결하는 창의적인 방법을 선호합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q22" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q22" value="4"> 그렇다</label>
    <label><input type="radio" name="q22" value="3"> 보통이다</label>
    <label><input type="radio" name="q22" value="2"> 아니다</label>
    <label><input type="radio" name="q22" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>23. 남들이 아직 시도하지 않은 **새로운 분야나 기술**에 대한 호기심이 많습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q23" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q23" value="4"> 그렇다</label>
    <label><input type="radio" name="q23" value="3"> 보통이다</label>
    <label><input type="radio" name="q23" value="2"> 아니다</label>
    <label><input type="radio" name="q23" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>24. **변화와 불확실성**을 기회로 여기고 적극적으로 탐색하는 편입니다.</p>
  <div class="answers">
    <label><input type="radio" name="q24" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q24" value="4"> 그렇다</label>
    <label><input type="radio" name="q24" value="3"> 보통이다</label>
    <label><input type="radio" name="q24" value="2"> 아니다</label>
    <label><input type="radio" name="q24" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>25. 새로운 것을 배우고 적용하며 **끊임없이 발전**하는 것을 중요하게 생각합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q25" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q25" value="4"> 그렇다</label>
    <label><input type="radio" name="q25" value="3"> 보통이다</label>
    <label><input type="radio" name="q25" value="2"> 아니다</label>
    <label><input type="radio" name="q25" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>

<div class="question">
  <p>26. 안정적인 이익보다 **높은 수익을 위해 위험을 감수**할 의향이 있습니다.</p>
  <div class="answers">
    <label><input type="radio" name="q26" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q26" value="4"> 그렇다</label>
    <label><input type="radio" name="q26" value="3"> 보통이다</label>
    <label><input type="radio" name="q26" value="2"> 아니다</label>
    <label><input type="radio" name="q26" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>27. 불확실한 상황에서도 **새로운 기회를 잡기 위해 과감하게 행동**하는 편입니다.</p>
  <div class="answers">
    <label><input type="radio" name="q27" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q27" value="4"> 그렇다</label>
    <label><input type="radio" name="q27" value="3"> 보통이다</label>
    <label><input type="radio" name="q27" value="2"> 아니다</label>
    <label><input type="radio" name="q27" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>28. **손실을 보더라도 실패를 통해 배우는 것**을 중요하게 생각합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q28" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q28" value="4"> 그렇다</label>
    <label><input type="radio" name="q28" value="3"> 보통이다</label>
    <label><input type="radio" name="q28" value="2"> 아니다</label>
    <label><input type="radio" name="q28" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>29. 주변의 만류에도 불구하고 **내 직관을 믿고 새로운 도전을** 합니다.</p>
  <div class="answers">
    <label><input type="radio" name="q29" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q29" value="4"> 그렇다</label>
    <label><input type="radio" name="q29" value="3"> 보통이다</label>
    <label><input type="radio" name="q29" value="2"> 아니다</label>
    <label><input type="radio" name="q29" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>
<div class="question">
  <p>30. 미래가 불확실하더라도, 내가 통제할 수 있는 범위 내라면 **큰 두려움 없이 뛰어듭니다.**</p>
  <div class="answers">
    <label><input type="radio" name="q30" value="5" required> 매우 그렇다</label>
    <label><input type="radio" name="q30" value="4"> 그렇다</label>
    <label><input type="radio" name="q30" value="3"> 보통이다</label>
    <label><input type="radio" name="q30" value="2"> 아니다</label>
    <label><input type="radio" name="q30" value="1"> 전혀 그렇지 않다</label>
  </div>
</div>

<button type="submit">결과 보기</button>
</form>

<div id="result">
  <div class="chart-container">
    <canvas id="esbiChart"></canvas>
  </div>
</div>

<script>
  // 질문별 가중치 (각 질문은 모든 6개 사분면에 영향을 미침)
  // [E, S, B, I, IN(혁신성), RT(위험 감수 성향)] 순서
  const questionWeights = {
    // E (Employee) 문항 (q1-q5)
    q1: { E: 2, S: 0.5, B: -0.5, I: -0.5, IN: -0.5, RT: -1 }, 
    q2: { E: 2, S: -1, B: -1, I: -1, IN: -0.5, RT: -1 }, 
    q3: { E: 2, S: -1, B: -1, I: -1, IN: -0.5, RT: -1 }, 
    q4: { E: 2, S: -0.5, B: -1, I: -1, IN: -0.5, RT: -1 }, 
    q5: { E: 2, S: -0.5, B: 0.5, I: -0.5, IN: 0, RT: -0.5 }, 

    // S (Self-employed) 문항 (q6-q10)
    q6: { E: -1, S: 2, B: 1, I: 0, IN: 0.5, RT: 0.5 }, 
    q7: { E: -0.5, S: 2, B: 0.5, I: -0.5, IN: 0, RT: 0 }, 
    q8: { E: -1, S: 2, B: 0.5, I: 0.5, IN: 0, RT: 0.5 }, 
    q9: { E: -0.5, S: 2, B: -1, I: -0.5, IN: -0.5, RT: -0.5 }, 
    q10: { E: 0.5, S: 2, B: 0.5, I: 0, IN: 0.5, RT: 0 }, 

    // B (Business Owner) 문항 (q11-q15)
    q11: { E: -1, S: -1, B: 2, I: 1, IN: 1, RT: 1.5 }, 
    q12: { E: 0, S: -1, B: 2, I: 0.5, IN: 0.5, RT: 1 }, 
    q13: { E: -0.5, S: 0.5, B: 2, I: 0.5, IN: 2, RT: 1.5 }, 
    q14: { E: -1, S: 0.5, B: 2, I: 0.5, IN: 1, RT: 1 }, 
    q15: { E: 0.5, S: 0, B: 2, I: -0.5, IN: 1, RT: 0.5 }, 

    // I (Investor) 문항 (q16-q20)
    q16: { E: -1, S: -1, B: 0.5, I: 2, IN: 0.5, RT: 2 }, 
    q17: { E: -1, S: -1, B: 0.5, I: 2, IN: 0, RT: 1.5 }, 
    q18: { E: -0.5, S: 0.5, B: 0.5, I: 2, IN: 1, RT: 1 }, 
    q19: { E: -1, S: 0.5, B: 0.5, I: 2, IN: 0.5, RT: 1.5 }, 
    q20: { E: 0, S: 0.5, B: 1, I: 2, IN: 0.5, RT: 1 }, 

    // IN (Innovation) 문항 (q21-q25)
    q21: { E: -1, S: 0.5, B: 1.5, I: 0.5, IN: 2, RT: 1.5 }, 
    q22: { E: -1, S: 0.5, B: 1.5, I: 0.5, IN: 2, RT: 1 }, 
    q23: { E: -0.5, S: 0.5, B: 1, I: 1, IN: 2, RT: 1 }, 
    q24: { E: -1, S: 0, B: 1.5, I: 1, IN: 2, RT: 1.5 }, 
    q25: { E: 0, S: 1, B: 1, I: 0.5, IN: 2, RT: 0.5 }, 

    // RT (Risk Tolerance) 문항 (q26-q30)
    q26: { E: -1.5, S: 0.5, B: 1.5, I: 2, IN: 1, RT: 2 }, 
    q27: { E: -1.5, S: 0.5, B: 1.5, I: 1.5, IN: 1.5, RT: 2 }, 
    q28: { E: -1, S: 0, B: 1, I: 1.5, IN: 1, RT: 2 }, 
    q29: { E: -1, S: 0.5, B: 1, I: 1, IN: 1, RT: 2 }, 
    q30: { E: -1.5, S: 0, B: 1.5, I: 1.5, IN: 1.5, RT: 2 }
  };

  const categoryDescriptions = {
    E: {
      name: '봉급생활자',
      emoji: '🧑‍💼',
      description: '안정적인 직업과 예측 가능한 수입을 선호하며, 정해진 규칙과 절차 내에서 일하는 것을 편안하게 생각합니다. 승진과 복리후생을 중요하게 여깁니다.'
    },
    S: {
      name: '자영업자/전문직',
      emoji: '🛠️',
      description: '자신의 일과 결정에 대한 완전한 통제를 선호하며, 자신의 노력과 재능이 직접적인 수입으로 연결되는 것을 중요시합니다. 특정 분야의 최고 전문가가 되기를 지향합니다.'
    },
    B: {
      name: '사업가',
      emoji: '📈',
      description: '자신 없이도 돌아가는 시스템을 구축하고, 타인의 시간과 재능을 활용하여 사업을 확장하고 성장시키는 데 집중합니다. 리더십을 발휘하여 비전을 제시하는 것을 좋아합니다.'
    },
    I: {
      name: '투자가',
      emoji: '💰',
      description: '돈이 스스로 일하게 만들어 부를 늘리는 것을 목표로 하며, 자산을 구매하고 시장의 흐름을 분석하여 수동적인 수입을 창출하는 데 관심이 많습니다. 재정적 자유와 독립을 궁극적인 목표로 삼습니다.'
    },
    IN: {
      name: '혁신가', // 이름은 그대로 사용하나, 결과 출력 시 수식어로 활용
      emoji: '💡',
      description: '새로운 아이디어를 탐색하고, 기존 방식을 개선하거나 완전히 새로운 솔루션을 창조하려는 성향이 강합니다. 변화와 불확실성을 기회로 여기며 끊임없이 발전하고자 합니다.'
    },
    RT: { // Social Value 대신 Risk Tolerance로 변경
      name: '위험 감수자', // 이름은 그대로 사용하나, 결과 출력 시 수식어로 활용
      emoji: '🎢',
      description: '불확실성이나 잠재적 손실에도 불구하고 새로운 기회를 탐색하고 도전하는 것을 두려워하지 않습니다. 높은 수익을 위해 기꺼이 위험을 감수하며, 실패를 배움의 과정으로 여깁니다.'
    }
  };

  let esbiChart; // 차트 인스턴스를 저장할 변수

  document.getElementById('quizForm').addEventListener('submit', function(e) {
    e.preventDefault();

    let scores = { E: 0, S: 0, B: 0, I: 0, IN: 0, RT: 0 }; // 6개 사분면 점수 초기화
    const formData = new FormData(this);

    for (const [key, value] of formData.entries()) {
      const answerValue = parseInt(value, 10); // 1~5점
      const weights = questionWeights[key];

      // 답변 값 1~5를 -2~+2로 변환 (3점은 0)
      const adjustedValue = answerValue - 3; 

      if (weights) {
        scores.E += adjustedValue * weights.E;
        scores.S += adjustedValue * weights.S;
        scores.B += adjustedValue * weights.B;
        scores.I += adjustedValue * weights.I;
        scores.IN += adjustedValue * weights.IN; 
        scores.RT += adjustedValue * weights.RT; 
      }
    }

    // --- 메인 ESBI 성향 결정 ---
    let mainESBICat = null;
    let mainESBIScore = -Infinity; 
    const esbiCategories = ['E', 'S', 'B', 'I']; // 메인 ESBI만 고려

    for (const cat of esbiCategories) {
        if (scores[cat] > mainESBIScore) {
            mainESBIScore = scores[cat];
            mainESBICat = cat;
        }
    }

    // --- IN 및 RT 수식어 결정 로직 ---
    let innovationModifier = '';
    let riskModifier = '';

    // IN과 RT 점수의 상대적인 높낮이를 판단하기 위한 기준점 설정
    // 모든 점수의 평균 또는 중간값을 기준으로 삼거나, 질문당 최대 점수를 기준으로 할 수 있습니다.
    // 여기서는 간단하게 평균 점수를 기준으로 높고 낮음을 판단합니다.
    const totalScoreIN = Object.values(questionWeights).reduce((sum, q) => sum + Math.abs(q.IN), 0) * 2; // IN에 대한 총 가중치 합 * 2 (최대 긍정 답변 기준)
    const totalScoreRT = Object.values(questionWeights).reduce((sum, q) => sum + Math.abs(q.RT), 0) * 2; // RT에 대한 총 가중치 합 * 2

    // IN과 RT의 점수 범위를 고려하여 기준점 설정 (예: 최대 가능 점수의 30% 이상, 70% 이상)
    // 이 임계값은 테스트 후 조정이 필요할 수 있습니다.
    const IN_THRESHOLD_HIGH = totalScoreIN * 0.4; // 40% 이상이면 '혁신적인'
    const IN_THRESHOLD_LOW = totalScoreIN * -0.2; // -20% 이하면 '보수적인' (혁신에 보수적)

    const RT_THRESHOLD_HIGH = totalScoreRT * 0.4; // 40% 이상이면 '과감한'
    const RT_THRESHOLD_LOW = totalScoreRT * -0.2; // -20% 이하면 '신중한' (위험 회피)


    // 혁신성 수식어
    if (scores.IN >= IN_THRESHOLD_HIGH) {
        innovationModifier = '혁신적인 ';
    } else if (scores.IN <= IN_THRESHOLD_LOW) {
        innovationModifier = '현상 유지적인 '; // 또는 '전통적인', '보수적인'
    }

    // 위험 감수 성향 수식어
    if (scores.RT >= RT_THRESHOLD_HIGH) {
        riskModifier = '과감한 ';
    } else if (scores.RT <= RT_THRESHOLD_LOW) {
        riskModifier = '신중한 '; // 또는 '안정 지향적인'
    }


    // 최종 결과 메시지 조합
    const resultDiv = document.getElementById('result');
    let resultHTML = `<h2>당신의 ESBI 확장 성향 분석 결과는!</h2>`;
    resultHTML += `<div class="chart-container"><canvas id="esbiChart"></canvas></div>`;

    if (mainESBICat) {
      const mainCategory = categoryDescriptions[mainESBICat];
      const finalCategoryName = `${innovationModifier}${riskModifier}${mainCategory.name}`;
      resultHTML += `<p>${mainCategory.emoji} 당신은 **${finalCategoryName}** 성향이 가장 강합니다! ${mainCategory.emoji}</p>`;
      resultHTML += `<p style="font-size: 1em; color: #607d8b; line-height: 1.5; margin-top: 15px;">${mainCategory.description}</p>`;
      
      // 혁신성/위험 감수 성향에 대한 추가 설명
      if (innovationModifier || riskModifier) {
        resultHTML += `<div style="font-size: 0.95em; color: #4CAF50; margin-top: 10px; border-top: 1px dashed #c8e6c9; padding-top: 10px;">`;
        if (innovationModifier) {
            if (scores.IN >= IN_THRESHOLD_HIGH) {
                resultHTML += `<p>💡 **혁신성:** 당신은 새로운 아이디어를 탐색하고 변화를 주도하는 데 강한 성향을 보입니다.</p>`;
            } else if (scores.IN <= IN_THRESHOLD_LOW) {
                resultHTML += `<p>💡 **혁신성:** 당신은 기존 방식을 선호하며, 새로운 시도에는 비교적 신중한 경향이 있습니다.</p>`;
            }
        }
        if (riskModifier) {
            if (scores.RT >= RT_THRESHOLD_HIGH) {
                resultHTML += `<p>🎢 **위험 감수 성향:** 당신은 높은 수익을 위해 기꺼이 위험을 감수하고 과감하게 도전하는 편입니다.</p>`;
            } else if (scores.RT <= RT_THRESHOLD_LOW) {
                resultHTML += `<p>🎢 **위험 감수 성향:** 당신은 불확실성을 회피하며, 안정성과 신중한 접근을 선호합니다.</p>`;
            }
        }
        resultHTML += `</div>`;
      }

    } else {
        resultHTML += `<p>성향을 분석할 수 없습니다. 모든 질문에 답했는지 확인해주세요.</p>`;
    }
    
    // 상세 점수 표시
    resultHTML += `<div class="score-detail">`;
    resultHTML += `<h3>영역별 점수:</h3>`;
    // 점수 내림차순 정렬
    // 메인 ESBI, IN, RT 순서로 표시되도록 조정 (선택적)
    const sortedScores = Object.entries(scores).sort(([, a], [, b]) => b - a);
    for (const [cat, score] of sortedScores) {
        resultHTML += `<p><span>${cat} (${categoryDescriptions[cat].name}):</span> ${score.toFixed(1)} 점</p>`; 
    }
    
    const allScores = Object.values(scores);
    const minCalculatedScore = Math.min(...allScores);
    const maxCalculatedScore = Math.max(...allScores);
    resultHTML += `<p style="margin-top: 10px; font-weight: bold; color: #e65100;">* 점수는 상대적인 성향을 나타내며, 높을수록 해당 성향이 강함을 의미합니다.<br>각 점수는 약 ${minCalculatedScore.toFixed(1)}점 ~ ${maxCalculatedScore.toFixed(1)}점 범위 내에 있습니다.</p>`;
    resultHTML += `</div>`;

    resultDiv.innerHTML = resultHTML;
    const ctx = document.getElementById('esbiChart').getContext('2d');

    // Chart.js를 위한 데이터 준비: labels에 'RT (위험 감수 성향)' 추가
    const labels = ['E (봉급생활자)', 'S (자영업자)', 'B (사업가)', 'I (투자가)', 'IN (혁신가)', 'RT (위험 감수 성향)'];
    // dataValues에 scores.RT 추가
    const dataValues = [scores.E, scores.S, scores.B, scores.I, scores.IN, scores.RT];

    // 점수를 0-100 스케일로 정규화 (그래프 시각화를 위해)
    const globalMin = Math.min(...allScores);
    const globalMax = Math.max(...allScores);

    const normalize = (value) => {
        if (globalMax === globalMin) return 50; 
        return ((value - globalMin) / (globalMax - globalMin)) * 100;
    };

    const normalizedData = dataValues.map(normalize);

    // 차트 인스턴스가 이미 존재하면 파괴 후 재생성
    if (esbiChart) {
      esbiChart.destroy();
    }

    esbiChart = new Chart(ctx, {
      type: 'radar',
      data: {
        labels: labels,
        datasets: [{
          label: 'ESBI 확장 성향 점수',
          data: normalizedData, 
          backgroundColor: 'rgba(75, 192, 192, 0.4)',
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 2,
          pointBackgroundColor: 'rgba(75, 192, 192, 1)',
          pointBorderColor: '#fff',
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: 'rgba(75, 192, 192, 1)'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false, 
        plugins: {
          legend: {
            display: false 
          },
          tooltip: {
            callbacks: {
                label: function(context) {
                    const rawScore = dataValues[context.dataIndex];
                    return ` ${context.dataset.label}: ${rawScore.toFixed(1)} 점`;
                }
            }
          }
        },
        scales: {
          r: {
            angleLines: {
              display: true 
            },
            grid: {
              circular: true,
              color: 'rgba(0,0,0,0.1)'
            },
            pointLabels: {
              font: {
                size: 14,
                weight: 'bold'
              },
              color: '#333'
            },
            min: 0, 
            max: 100, 
            ticks: {
                display: false 
            }
          }
        }
      }
    });

    resultDiv.scrollIntoView({ behavior: 'smooth' }); 
  });
</script>

</body>
<footer style="text-align:center; font-size:0.9em; color:#666; margin-top:40px;">
  © 2025 이상훈컴퍼니 무단 복제 및 재배포 금지.
</footer>

</html>
